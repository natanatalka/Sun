let fs = require('fs-extra');
let path = require('path');
let dir = process.env.IONIC_ROOT_DIR;

module.exports = [
  dir + '/src/theme/index.scss',
  dir + '/node_modules/ionic-angular/themes/ionic.components.scss',
  dir + '/node_modules/smartux-client/styles/index.scss',
  dir + '/src/app/app.scss',
  dir + '/node_modules/font-awesome/scss/font-awesome.scss'
].concat(getStylesForPages(dir + '/src/pages'));

// HELPERS:

function getStylesForPages(dir) {
  let res = [];
  if (!fs.existsSync(dir)) {
    return res;
  }
  let files = fs.readdirSync(dir);
  files.forEach(fileName => {
    let file = path.join(dir, fileName);
    let stat = fs.lstatSync(file);
    if (stat.isDirectory()) {
      res = res.concat(getStylesForPages(file));
    } else if (/\.scss$/.test(fileName)) {
      res.push(file);
    }
  });
  return res;
}
