let scripts = require('@ionic/app-scripts');
let path = require('path');
let copy = require('@ionic/app-scripts/dist/copy').copy;
let copyCustom = require('./helpers/copy').custom;

// GET PARAMS:
let PATH = path.resolve(process.argv[process.argv.indexOf('--path') + 1]);

// CONFIGURE:
process.env.IONIC_ROOT_DIR = PATH;
process.env.IONIC_BUILD_DIR = PATH + '/www/build';

// PREPARE:
let context = scripts.generateContext(null);
scripts.setContext(context);

// RUN:
(async () => {
  await copy(context);
  await copyCustom(context);
})().catch(error => {
  console.log(error);
  process.exit(1);
});
