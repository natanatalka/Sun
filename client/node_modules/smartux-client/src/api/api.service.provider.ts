import { options } from '../options';
import { ApiService } from './api.service.abstract';
import { HttpApiService } from './http-api.service';
import { MockApiService } from './mock-api.service';
import { PowwowLoginApiService } from './powwow-login-api.service';
import { WsApiService } from './ws-api.service';

export let apiServiceProvider = {
  provide: ApiService,
  deps: [MockApiService, WsApiService, HttpApiService, PowwowLoginApiService],
  useFactory: (
    mockService: MockApiService,
    wsService: WsApiService,
    httpApiService: HttpApiService,
    powwowLoginService: PowwowLoginApiService
  ) => {
    switch (options.apiMode) {
    case 'mock':
      console.log('MOCK MODE');
      return mockService;
    case 'powwowLogin':
      console.log('PowwowLogin MODE');
      return powwowLoginService;
    case 'ws':
      return wsService;
    default:
      return httpApiService;
    }
  }
};

